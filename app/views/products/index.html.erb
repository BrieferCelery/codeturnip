<p id="notice"><%= notice %></p>

<h1>Products</h1>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Price</th>
      <th>Supply</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @products.each do |product| %>
      <tr>
        <td><%= image_tag product.picture, width: 120 if product.picture.attached? %></td>
        <td> <%= product.name %></td>
        <td><%= product.price %></td>
        <td><%= product.supply %></td>
        <!--Check if user is signed in and if so display-->
        <% if user_signed_in? && current_user.has_role?(:admin)%>
          <td><%= link_to 'Product details', product %></td>
          <td><%= link_to 'Edit', edit_product_path(product) %></td>
          <td><%= link_to 'Destroy', product, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% else %>
         <td><%= link_to 'Product details', product %></td>
         <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<div class="card" style="width: 18rem;">
  <%@products.each do  |product| %>
  <div class="card-img-top">
    <%= image_tag product.picture, width: 120 if product.picture.attached?  %>
  </div>
  <div class="card-body">
      <h5 class="card-title"><%= product.name.upcase %></h5>
      <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
      <a href="#" class="btn btn-primary">Go somewhere</a>
   </div>
   <% end %>
</div>

<% if user_signed_in? && current_user.has_role?(:admin)%>
  <%= link_to 'New Product', new_product_path %>
<% end %>


